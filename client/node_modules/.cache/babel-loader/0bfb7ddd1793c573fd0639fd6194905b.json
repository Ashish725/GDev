{"ast":null,"code":"import _slicedToArray from\"/Users/ashish/Desktop/GuruDev/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{useParams,Link,useNavigate,useLocation}from'react-router-dom';import{useSelector,useDispatch}from'react-redux';import moment from'moment';import copy from'copy-to-clipboard';import upvote from\"../../assets/sort-up.svg\";import downvote from\"../../assets/sort-down.svg\";import'./Questions.css';import Avatar from'../../components/Avatar/Avatar';import DisplayAnswer from'./DisplayAnswer';import{postAnswer,deleteQuestion,voteQuestion}from'../../actions/question';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var QuestionsDetails=function QuestionsDetails(){var _useParams=useParams(),id=_useParams.id;var questionsList=useSelector(function(state){return state.questionsReducer;});var _useState=useState(''),_useState2=_slicedToArray(_useState,2),Answer=_useState2[0],setAnswer=_useState2[1];var Navigate=useNavigate();var dispatch=useDispatch();var User=useSelector(function(state){return state.currentUserReducer;});var location=useLocation();var url='https://gdev7.netlify.app';var handlePostAns=function handlePostAns(e,answerLength){e.preventDefault();if(User===null){alert('Login or Signup to answer a question');Navigate('/Auth');}else{if(Answer===''){alert('Enter an answer before submitting');}else{dispatch(postAnswer({id:id,noOfAnswers:answerLength+1,answerBody:Answer,userAnswered:User.result.name}));}}};var handleShare=function handleShare(){copy(url+location.pathname);alert('Copied url : '+url+location.pathname);};var handleDelete=function handleDelete(){dispatch(deleteQuestion(id,Navigate));};var handleUpVote=function handleUpVote(){dispatch(voteQuestion(id,'upVote'));};var handleDownVote=function handleDownVote(){dispatch(voteQuestion(id,'downVote'));};return/*#__PURE__*/_jsx(\"div\",{className:\"question-details-page\",children:questionsList.data===null?/*#__PURE__*/_jsx(\"h1\",{children:\"Loading...\"}):/*#__PURE__*/_jsx(_Fragment,{children:questionsList.data.filter(function(question){return question._id===id;}).map(function(question){var _User$result;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"section\",{className:\"question-details-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:question.questionTitle}),/*#__PURE__*/_jsxs(\"div\",{className:\"question-details-container-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"question-votes\",children:[/*#__PURE__*/_jsx(\"img\",{src:upvote,alt:\"\",width:\"18\",className:\"votes-icon\",onClick:handleUpVote}),/*#__PURE__*/_jsx(\"p\",{children:question.upVote.length-question.downVote.length}),/*#__PURE__*/_jsx(\"img\",{src:downvote,alt:\"\",width:\"18\",className:\"votes-icon\",onClick:handleDownVote})]}),/*#__PURE__*/_jsxs(\"div\",{style:{width:\"100%\"},children:[/*#__PURE__*/_jsx(\"p\",{className:\"question-body\",children:question.questionBody}),/*#__PURE__*/_jsx(\"div\",{className:\"question-details-tags\",children:question.questionTags.map(function(tag){return/*#__PURE__*/_jsx(\"p\",{children:tag},tag);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"question-actions-user\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleShare,children:\"Share\"}),(User===null||User===void 0?void 0:(_User$result=User.result)===null||_User$result===void 0?void 0:_User$result._id)===(question===null||question===void 0?void 0:question.userId)&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleDelete,children:\"Delete\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"asked \",moment(question.askedOn).fromNow()]}),/*#__PURE__*/_jsxs(Link,{to:\"/Users/\".concat(question.userId),className:\"user-link\",style:{color:'#0086d8'},children:[/*#__PURE__*/_jsx(Avatar,{backgroundColor:\"orange\",px:\"8px\",py:\"5px\",borderRadius:\"4px\",children:question.userPosted.charAt(0).toUpperCase()}),/*#__PURE__*/_jsx(\"div\",{children:question.userPosted})]})]})]})]})]})]}),question.noOfAnswers!==0&&/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsxs(\"h3\",{children:[question.noOfAnswers,\" Answers\"]}),/*#__PURE__*/_jsx(DisplayAnswer,{question:question,handleShare:handleShare},question._id)]}),/*#__PURE__*/_jsxs(\"section\",{className:\"post-ans-container\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Your Answer\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(e){handlePostAns(e,question.answer.length);},children:[/*#__PURE__*/_jsx(\"textarea\",{name:\"\",id:\"\",cols:\"30\",rows:\"10\",onChange:function onChange(e){return setAnswer(e.target.value);}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"Submit\",className:\"post-ans-btn\",value:\"Post Your Answer\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Browse other Question tagged\",question.questionTags.map(function(tag){return/*#__PURE__*/_jsxs(Link,{to:\"/Tags\",className:\"ans-tags\",children:[\" \",tag,\" \"]},tag);}),\" or\",/*#__PURE__*/_jsx(Link,{to:\"/AskQuestion\",style:{textDecoration:\"none\",color:\"#009dff\"},children:\" ask your own question.\"})]})]})]},question._id);})})});};export default QuestionsDetails;","map":{"version":3,"sources":["/Users/ashish/Desktop/GuruDev/client/src/Pages/Questions/QuestionsDetails.jsx"],"names":["React","useState","useParams","Link","useNavigate","useLocation","useSelector","useDispatch","moment","copy","Avatar","DisplayAnswer","postAnswer","deleteQuestion","voteQuestion","QuestionsDetails","id","questionsList","state","questionsReducer","Answer","setAnswer","Navigate","dispatch","User","currentUserReducer","location","url","handlePostAns","e","answerLength","preventDefault","alert","noOfAnswers","answerBody","userAnswered","result","name","handleShare","pathname","handleDelete","handleUpVote","handleDownVote","data","filter","question","_id","map","questionTitle","upvote","upVote","length","downVote","downvote","width","questionBody","questionTags","tag","userId","askedOn","fromNow","color","userPosted","charAt","toUpperCase","answer","target","value","textDecoration"],"mappings":"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","sourcesContent":["import React, { useState} from 'react'\nimport { useParams, Link, useNavigate, useLocation } from 'react-router-dom'\nimport { useSelector, useDispatch} from 'react-redux'\nimport moment from 'moment'\nimport copy from 'copy-to-clipboard'\n\nimport upvote from '../../assets/sort-up.svg'\nimport downvote from '../../assets/sort-down.svg'\nimport './Questions.css'\nimport Avatar from '../../components/Avatar/Avatar'\nimport DisplayAnswer from './DisplayAnswer'\nimport { postAnswer, deleteQuestion, voteQuestion } from '../../actions/question'\n\nconst QuestionsDetails = () => {\n    const { id } = useParams()\n    const questionsList = useSelector(state => state.questionsReducer)\n    const [Answer, setAnswer] = useState('')\n    const Navigate = useNavigate()\n    const dispatch = useDispatch()\n    const User = useSelector((state) => (state.currentUserReducer))\n    const location = useLocation()\n    const url = 'https://gdev7.netlify.app'\n\n    const handlePostAns = (e, answerLength) =>{\n        e.preventDefault()\n        if(User === null){\n            alert('Login or Signup to answer a question')\n            Navigate('/Auth')\n        }else{\n            if(Answer === ''){\n                alert('Enter an answer before submitting')\n            } else{\n                dispatch(postAnswer({ id, noOfAnswers: answerLength + 1, answerBody: Answer, userAnswered: User.result.name }))\n            }\n        }\n    }\n\n    const handleShare = () => {\n        copy(url+location.pathname)\n        alert('Copied url : '+url+location.pathname)\n    }\n\n    const handleDelete = () => {\n        dispatch(deleteQuestion(id, Navigate))\n    }\n\n    const handleUpVote = () => {\n        dispatch(voteQuestion(id, 'upVote'))\n    }\n\n    const handleDownVote = () => {\n        dispatch(voteQuestion(id, 'downVote'))\n    }\n\n    return (\n        <div className='question-details-page'>\n            {\n                questionsList.data === null ?\n                <h1>Loading...</h1> :\n                <>\n                    {\n                        questionsList.data.filter(question => question._id === id).map(question => (\n                            <div key={question._id}>\n                                <section className='question-details-container'>\n                                    <h1>{question.questionTitle}</h1>\n                                    <div className='question-details-container-2'>\n                                        <div className=\"question-votes\">\n                                            <img src={upvote} alt=\"\" width='18' className='votes-icon' onClick={handleUpVote}/>\n                                            <p>{question.upVote.length - question.downVote.length}</p>\n                                            <img src={downvote} alt=\"\" width='18' className='votes-icon' onClick={handleDownVote}/>\n                                        </div>\n                                        <div style={{width: \"100%\"}}>\n                                            <p className='question-body'>{question.questionBody}</p>\n                                            <div className=\"question-details-tags\">\n                                                {\n                                                    question.questionTags.map((tag) => (\n                                                        <p key={tag}>{tag}</p>\n                                                    ))\n                                                }\n                                            </div>\n                                            <div className=\"question-actions-user\">\n                                                <div>\n                                                    <button type='button' onClick={handleShare}>Share</button>\n                                                    {\n                                                        User?.result?._id === question?.userId && (\n                                                            <button type='button' onClick={handleDelete}>Delete</button>\n                                                        )\n                                                    }\n                                                </div>\n                                                <div>\n                                                    <p>asked {moment(question.askedOn).fromNow()}</p>\n                                                    <Link to={`/Users/${question.userId}`} className='user-link' style={{color:'#0086d8'}}>\n                                                        <Avatar backgroundColor=\"orange\" px='8px' py='5px' borderRadius=\"4px\">{question.userPosted.charAt(0).toUpperCase()}</Avatar>\n                                                        <div>\n                                                            {question.userPosted}\n                                                        </div>\n                                                    </Link>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </section>\n                                {\n                                    question.noOfAnswers !== 0 && (\n                                        <section>\n                                            <h3>{question.noOfAnswers} Answers</h3>\n                                            <DisplayAnswer key={question._id} question={question} handleShare={handleShare}/>\n                                        </section>\n                                    )\n                                }\n                                <section className='post-ans-container'>\n                                    <h3>Your Answer</h3>\n                                    <form onSubmit={ (e) => { handlePostAns(e, question.answer.length) }}>\n                                        <textarea name=\"\" id=\"\" cols=\"30\" rows=\"10\" onChange={e => setAnswer(e.target.value)}></textarea><br />\n                                        <input type=\"Submit\" className='post-ans-btn' value='Post Your Answer'/>\n                                    </form>\n                                    <p>\n                                        Browse other Question tagged\n                                        {\n                                            question.questionTags.map((tag) => (\n                                                <Link to='/Tags' key={tag} className='ans-tags'> {tag} </Link>\n                                            ))\n                                        } or \n                                        <Link to='/AskQuestion' style={{textDecoration: \"none\", color:\"#009dff\"}}> ask your own question.</Link>\n                                    </p>\n                                </section>\n                            </div>\n                        ))\n                    }\n                </>\n            }\n        </div>\n    )\n}\n\nexport default QuestionsDetails\n"]},"metadata":{},"sourceType":"module"}